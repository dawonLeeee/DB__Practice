<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>schedule-query.xml file</comment>
	

	<!-- 전체 스케줄 조회(매개변수 serviceType) -->
	<entry key="selectAllSchedule1">
SELECT S.SCHEDULE_NO, 
TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", ISBOOK
FROM SCHEDULE S
LEFT JOIN MEMBER M ON(S.MEMBER_NO = M.MEMBER_NO)
LEFT JOIN BOOKING B ON(B.SCHEDULE_NO = S.SCHEDULE_NO)
WHERE SERVICE_TYPE = ?
ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	<!-- 전체 스케줄 조회(매개변수 x) -->
	<entry key="selectAllSchedule2">
SELECT S.SCHEDULE_NO, 
TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", ISBOOK
FROM SCHEDULE S
LEFT JOIN MEMBER M ON(S.MEMBER_NO = M.MEMBER_NO)
LEFT JOIN BOOKING B ON(B.SCHEDULE_NO = S.SCHEDULE_NO)
ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
	<!-- 파트너별 스케줄 조회 -->
	<entry key="selectScheduleByPartner">
SELECT S.SCHEDULE_NO, 
TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", ISBOOK
FROM SCHEDULE S
LEFT JOIN MEMBER M ON(S.MEMBER_NO = M.MEMBER_NO)
LEFT JOIN BOOKING B ON(B.SCHEDULE_NO = S.SCHEDULE_NO)
WHERE M.MEMBER_NM = ?
ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	


	
	<!-- 날짜로 스케줄 검색 -->
	<entry key="searchScheduleByDate">
SELECT S.SCHEDULE_NO, 
TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", ISBOOK
FROM SCHEDULE S
LEFT JOIN MEMBER M ON(S.MEMBER_NO = M.MEMBER_NO)
LEFT JOIN BOOKING B ON(B.SCHEDULE_NO = S.SCHEDULE_NO)
WHERE SCHEDULE_TIME > TO_DATE(?) 
ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
	<!-- 시간대별 스케줄 검색 -->
	<entry key="searchScheduleByTime">
SELECT S.SCHEDULE_NO, 
TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", ISBOOK
FROM SCHEDULE S
LEFT JOIN MEMBER M ON(S.MEMBER_NO = M.MEMBER_NO)
LEFT JOIN BOOKING B ON(B.SCHEDULE_NO = S.SCHEDULE_NO)
WHERE TO_CHAR(SCHEDULE_TIME, 'HH24') = ?
ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
	
	<!-- 스케줄번호로 스케줄 검색 -->
	<entry key="selectScheduleByNo">
SELECT S.SCHEDULE_NO, 
TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", ISBOOK
FROM SCHEDULE S
LEFT JOIN MEMBER M ON(S.MEMBER_NO = M.MEMBER_NO)
LEFT JOIN BOOKING B ON(B.SCHEDULE_NO = S.SCHEDULE_NO)
WHERE S.SCHEDULE_NO = ?
ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
	<!-- 스케줄 예약하기1 -->
	<entry key="bookSchedule1">
		UPDATE SCHEDULE SET
		ISBOOK = 'Y'
		WHERE SCHEDULE_NO = ?
		AND ISBOOK = 'N'
	</entry>
	
	<!-- 스케줄 예약하기2 -->
	<entry key="bookSchedule2">
		INSERT INTO BOOKING VALUES(?, ?)
	</entry>
	
</properties>


