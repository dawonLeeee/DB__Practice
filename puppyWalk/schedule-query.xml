<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>schedule-query.xml file</comment>
	

	<!-- 서비스별 스케줄 조회(매개변수 serviceType) -->
	<entry key="selectAllSchedule1">
SELECT S.SCHEDULE_NO, 
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", 
		CASE 
			WHEN BOOK_MEMBER > 0
			THEN 'Y'
			ELSE 'N'
		END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)
		WHERE SERVICE_TYPE = ?
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	<!-- 전체 스케줄 조회(매개변수 x) -->
	<entry key="selectAllSchedule2">
SELECT S.SCHEDULE_NO, 
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", 
		CASE 
			WHEN BOOK_MEMBER > 0
			THEN 'Y'
			ELSE 'N'
		END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
	<!-- 파트너별 스케줄 조회 -->
	<entry key="selectScheduleByPartner">
SELECT S.SCHEDULE_NO, 
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", 
		CASE 
			WHEN BOOK_MEMBER > 0
			THEN 'Y'
			ELSE 'N'
		END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)
		WHERE MEMBER_NM = ?
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	


	
	<!-- 날짜로 스케줄 검색 -->
	<entry key="searchScheduleByDate">
		SELECT S.SCHEDULE_NO, 
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", 
		CASE 
			WHEN BOOK_MEMBER > 0
			THEN 'Y'
			ELSE 'N'
		END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)
		WHERE SCHEDULE_TIME > TO_DATE(?) 
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
	<!-- 시간대별 스케줄 검색 -->
	<entry key="searchScheduleByTime">
			SELECT S.SCHEDULE_NO, 
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", CASE 
			WHEN BOOK_MEMBER > 0
			THEN 'Y'
			ELSE 'N'
		END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)
		WHERE TO_CHAR(SCHEDULE_TIME, 'HH24') = ?
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
	
	<!-- 스케줄번호로 스케줄 검색 -->
	<entry key="selectScheduleByNo">
		SELECT S.SCHEDULE_NO, 
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", CASE 
			WHEN BOOK_MEMBER > 0
			THEN 'Y'
			ELSE 'N'
		END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)
		WHERE S.SCHEDULE_NO = ?
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
	<!-- 스케줄 예약하기 -->
	<entry key="bookSchedule">
		UPDATE SCHEDULE SET
		BOOK_MEMBER = ?
		WHERE SCHEDULE_NO = ?
	</entry>
	
	
	
		<!-- 내가 예약한 스케줄 확인 -->
	<entry key="selectMySchedule">
		SELECT S.SCHEDULE_NO, 
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", CASE 
			WHEN BOOK_MEMBER > 0
			THEN 'Y'
			ELSE 'N'
		END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)
		WHERE BOOK_MEMBER = ?
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
			<!-- 취소할 수 있는 스케줄 목록 조회 -->
	<entry key="searchDeleteSchedule">
		SELECT S.SCHEDULE_NO,
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", CASE 
			WHEN BOOK_MEMBER > 0 THEN 'Y' ELSE 'N' END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)		
		WHERE BOOK_MEMBER = ?
		AND SCHEDULE_TIME - SYSDATE > 1
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
	
				<!-- 스케줄 취소 -->
	<entry key="deleteSchedule">
		DELETE FROM SCHEDULE
		WHERE SCHEDULE_NO = ?
		AND BOOK_MEMBER = ?
		AND SCHEDULE_TIME - SYSDATE > 1
	</entry>
	
	
				<!-- 후기 작성할 수 있는 스케줄 목록 조회 -->
	<entry key="searchReviewSchedule">
		SELECT S.SCHEDULE_NO,
		TO_CHAR(SCHEDULE_TIME, 'YYYY-MM-DD HH24') || '시 ~' || (TO_CHAR(SCHEDULE_TIME, 'HH24')+2) || '시' AS "SCHEDULE_TIME"
		,SERVICE_TYPE , M.MEMBER_NM, TO_CHAR(SCHEDULE_TIME, 'HH24') "HOUR", CASE 
			WHEN BOOK_MEMBER > 0 THEN 'Y' ELSE 'N' END "ISBOOK"
		FROM SCHEDULE S
		LEFT JOIN MEMBER M ON(PARTNER_NO = M.MEMBER_NO)		
		WHERE BOOK_MEMBER = ?
		AND SYSDATE - SCHEDULE_TIME > 0
		ORDER BY ISBOOK DESC, SCHEDULE_NO DESC
	</entry>
	
</properties>


